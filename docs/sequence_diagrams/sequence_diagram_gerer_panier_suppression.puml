@startuml sequence diagram  gerer le panier - supprimer une formation
title Gérer le panier - Supprimer une formation

actor "Utilisateur connecté" as User
participant "Main" as Main
participant "CourseService" as CourseService
participant "CartService" as CartService
participant "CartDAO" as CartDAO
database "Database" as DB

User -> Main : sélectionner "Supprimer une formation du panier"
activate Main

Main -> User : demander l'identifiant de la formation
User -> Main : saisir idCourse

Main -> CourseService : verifyCourseExists(idCourse)
activate CourseService

alt ID valide
    CourseService --> Main : true
    deactivate CourseService

    Main -> CartService : destroyCourseInCart(idCourse, idUser)
    activate CartService

    CartService -> CartDAO : deleteCourse(idCourse, idUser)
    activate CartDAO

    CartDAO -> DB : requête SQL DELETE
    activate DB

    DB --> CartDAO : nombre de lignes supprimées
    deactivate DB

    CartDAO --> CartService : boolean
    deactivate CartDAO

    alt suppression réussie
        CartService -> Main : afficher "Formation supprimée"
    else suppression échouée
        CartService -> Main : afficher "Erreur lors de la suppression de la formation."
    end

    deactivate CartService

else ID invalide
    CourseService --> Main : false
    deactivate CourseService

    Main -> User : afficher "L'identifiant saisi n'existe pas."
end

deactivate Main
@enduml